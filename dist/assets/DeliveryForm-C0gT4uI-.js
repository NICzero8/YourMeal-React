import{R as q,r as hr,u as vr,a as gr,j as x,c as mr,b as _r}from"./index-BgLun9PX.js";var de=e=>e.type==="checkbox",ae=e=>e instanceof Date,C=e=>e==null;const Ze=e=>typeof e=="object";var S=e=>!C(e)&&!Array.isArray(e)&&Ze(e)&&!ae(e),xr=e=>S(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,br=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pr=(e,s)=>e.has(br(s)),Vr=e=>{const s=e.constructor&&e.constructor.prototype;return S(s)&&s.hasOwnProperty("isPrototypeOf")},Ne=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function P(e){let s;const t=Array.isArray(e);if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Ne&&(e instanceof Blob||e instanceof FileList))&&(t||S(e)))if(s=t?[]:{},!t&&!Vr(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=P(e[n]));else return e;return s}var fe=e=>Array.isArray(e)?e.filter(Boolean):[],A=e=>e===void 0,f=(e,s,t)=>{if(!s||!S(e))return t;const n=fe(s.split(/[,[\].]+?/)).reduce((u,a)=>C(u)?u:u[a],e);return A(n)||n===e?A(e[s])?t:e[s]:n},J=e=>typeof e=="boolean";const We={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},W={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},G={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};q.createContext(null);var Fr=(e,s,t,n=!0)=>{const u={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(u,a,{get:()=>{const y=a;return s._proxyFormState[y]!==W.all&&(s._proxyFormState[y]=!n||W.all),t&&(t[y]=!0),e[y]}});return u},R=e=>S(e)&&!Object.keys(e).length,Ar=(e,s,t,n)=>{t(e);const{name:u,...a}=e;return R(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(y=>s[y]===(!n||W.all))},De=e=>Array.isArray(e)?e:[e];function wr(e){const s=q.useRef(e);s.current=e,q.useEffect(()=>{const t=!e.disabled&&s.current.subject&&s.current.subject.subscribe({next:s.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}var Q=e=>typeof e=="string",Dr=(e,s,t,n,u)=>Q(e)?(n&&s.watch.add(e),f(t,e,u)):Array.isArray(e)?e.map(a=>(n&&s.watch.add(a),f(t,a))):(n&&(s.watchAll=!0),t),Le=e=>/^\w*$/.test(e),er=e=>fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,s,t)=>{let n=-1;const u=Le(s)?[s]:er(s),a=u.length,y=a-1;for(;++n<a;){const v=u[n];let T=t;if(n!==y){const M=e[v];T=S(M)||Array.isArray(M)?M:isNaN(+u[n+1])?{}:[]}e[v]=T,e=e[v]}return e},kr=(e,s,t,n,u)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:u||!0}}:{},He=e=>({isOnSubmit:!e||e===W.onSubmit,isOnBlur:e===W.onBlur,isOnChange:e===W.onChange,isOnAll:e===W.all,isOnTouch:e===W.onTouched}),Ke=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ce=(e,s,t,n)=>{for(const u of t||Object.keys(e)){const a=f(e,u);if(a){const{_f:y,...v}=a;if(y){if(y.refs&&y.refs[0]&&s(y.refs[0],u)&&!n)break;if(y.ref&&s(y.ref,y.name)&&!n)break;ce(v,s)}else S(v)&&ce(v,s)}}};var Sr=(e,s,t)=>{const n=fe(f(e,t));return V(n,"root",s[t]),V(e,t,n),e},je=e=>e.type==="file",X=e=>typeof e=="function",_e=e=>{if(!Ne)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},me=e=>Q(e),Ce=e=>e.type==="radio",xe=e=>e instanceof RegExp;const Qe={value:!1,isValid:!1},Ye={value:!0,isValid:!0};var rr=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!A(e[0].attributes.value)?A(e[0].value)||e[0].value===""?Ye:{value:e[0].value,isValid:!0}:Ye:Qe}return Qe};const ze={isValid:!1,value:null};var tr=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,ze):ze;function Ge(e,s,t="validate"){if(me(e)||Array.isArray(e)&&e.every(me)||J(e)&&!e)return{type:t,message:me(e)?e:"",ref:s}}var ie=e=>S(e)&&!xe(e)?e:{value:e,message:""},Je=async(e,s,t,n,u)=>{const{ref:a,refs:y,required:v,maxLength:T,minLength:M,min:F,max:g,pattern:L,validate:H,name:j,valueAsNumber:ye,mount:K,disabled:U}=e._f,m=f(s,j);if(!K||U)return{};const Y=y?y[0]:a,z=_=>{n&&Y.reportValidity&&(Y.setCustomValidity(J(_)?"":_||""),Y.reportValidity())},w={},re=Ce(a),he=de(a),Z=re||he,te=(ye||je(a))&&A(a.value)&&A(m)||_e(a)&&a.value===""||m===""||Array.isArray(m)&&!m.length,B=kr.bind(null,j,t,w),ve=(_,b,D,N=G.maxLength,$=G.minLength)=>{const I=_?b:D;w[j]={type:_?N:$,message:I,ref:a,...B(_?N:$,I)}};if(u?!Array.isArray(m)||!m.length:v&&(!Z&&(te||C(m))||J(m)&&!m||he&&!rr(y).isValid||re&&!tr(y).isValid)){const{value:_,message:b}=me(v)?{value:!!v,message:v}:ie(v);if(_&&(w[j]={type:G.required,message:b,ref:Y,...B(G.required,b)},!t))return z(b),w}if(!te&&(!C(F)||!C(g))){let _,b;const D=ie(g),N=ie(F);if(!C(m)&&!isNaN(m)){const $=a.valueAsNumber||m&&+m;C(D.value)||(_=$>D.value),C(N.value)||(b=$<N.value)}else{const $=a.valueAsDate||new Date(m),I=ue=>new Date(new Date().toDateString()+" "+ue),le=a.type=="time",ne=a.type=="week";Q(D.value)&&m&&(_=le?I(m)>I(D.value):ne?m>D.value:$>new Date(D.value)),Q(N.value)&&m&&(b=le?I(m)<I(N.value):ne?m<N.value:$<new Date(N.value))}if((_||b)&&(ve(!!_,D.message,N.message,G.max,G.min),!t))return z(w[j].message),w}if((T||M)&&!te&&(Q(m)||u&&Array.isArray(m))){const _=ie(T),b=ie(M),D=!C(_.value)&&m.length>+_.value,N=!C(b.value)&&m.length<+b.value;if((D||N)&&(ve(D,_.message,b.message),!t))return z(w[j].message),w}if(L&&!te&&Q(m)){const{value:_,message:b}=ie(L);if(xe(_)&&!m.match(_)&&(w[j]={type:G.pattern,message:b,ref:a,...B(G.pattern,b)},!t))return z(b),w}if(H){if(X(H)){const _=await H(m,s),b=Ge(_,Y);if(b&&(w[j]={...b,...B(G.validate,b.message)},!t))return z(b.message),w}else if(S(H)){let _={};for(const b in H){if(!R(_)&&!t)break;const D=Ge(await H[b](m,s),Y,b);D&&(_={...D,...B(b,D.message)},z(D.message),t&&(w[j]=_))}if(!R(_)&&(w[j]={ref:Y,..._},!t))return w}}return z(!0),w};function Er(e,s){const t=s.slice(0,-1).length;let n=0;for(;n<t;)e=A(e)?n++:e[s[n++]];return e}function Nr(e){for(const s in e)if(e.hasOwnProperty(s)&&!A(e[s]))return!1;return!0}function k(e,s){const t=Array.isArray(s)?s:Le(s)?[s]:er(s),n=t.length===1?e:Er(e,t),u=t.length-1,a=t[u];return n&&delete n[a],u!==0&&(S(n)&&R(n)||Array.isArray(n)&&Nr(n))&&k(e,t.slice(0,-1)),e}var ke=()=>{let e=[];return{get observers(){return e},next:u=>{for(const a of e)a.next&&a.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(a=>a!==u)}}),unsubscribe:()=>{e=[]}}},be=e=>C(e)||!Ze(e);function ee(e,s){if(be(e)||be(s))return e===s;if(ae(e)&&ae(s))return e.getTime()===s.getTime();const t=Object.keys(e),n=Object.keys(s);if(t.length!==n.length)return!1;for(const u of t){const a=e[u];if(!n.includes(u))return!1;if(u!=="ref"){const y=s[u];if(ae(a)&&ae(y)||S(a)&&S(y)||Array.isArray(a)&&Array.isArray(y)?!ee(a,y):a!==y)return!1}}return!0}var sr=e=>e.type==="select-multiple",Lr=e=>Ce(e)||de(e),Se=e=>_e(e)&&e.isConnected,ir=e=>{for(const s in e)if(X(e[s]))return!0;return!1};function pe(e,s={}){const t=Array.isArray(e);if(S(e)||t)for(const n in e)Array.isArray(e[n])||S(e[n])&&!ir(e[n])?(s[n]=Array.isArray(e[n])?[]:{},pe(e[n],s[n])):C(e[n])||(s[n]=!0);return s}function ar(e,s,t){const n=Array.isArray(e);if(S(e)||n)for(const u in e)Array.isArray(e[u])||S(e[u])&&!ir(e[u])?A(s)||be(t[u])?t[u]=Array.isArray(e[u])?pe(e[u],[]):{...pe(e[u])}:ar(e[u],C(s)?{}:s[u],t[u]):t[u]=!ee(e[u],s[u]);return t}var ge=(e,s)=>ar(e,s,pe(s)),lr=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:n})=>A(e)?e:s?e===""?NaN:e&&+e:t&&Q(e)?new Date(e):n?n(e):e;function Ee(e){const s=e.ref;if(!(e.refs?e.refs.every(t=>t.disabled):s.disabled))return je(s)?s.files:Ce(s)?tr(e.refs).value:sr(s)?[...s.selectedOptions].map(({value:t})=>t):de(s)?rr(e.refs).value:lr(A(s.value)?e.ref.value:s.value,e)}var jr=(e,s,t,n)=>{const u={};for(const a of e){const y=f(s,a);y&&V(u,a,y._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:n}},oe=e=>A(e)?e:xe(e)?e.source:S(e)?xe(e.value)?e.value.source:e.value:e,Cr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Xe(e,s,t){const n=f(e,t);if(n||Le(t))return{error:n,name:t};const u=t.split(".");for(;u.length;){const a=u.join("."),y=f(s,a),v=f(e,a);if(y&&!Array.isArray(y)&&t!==a)return{name:t};if(v&&v.type)return{name:a,error:v};u.pop()}return{name:t}}var Tr=(e,s,t,n,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(s||e):(t?n.isOnBlur:u.isOnBlur)?!e:(t?n.isOnChange:u.isOnChange)?e:!0,Or=(e,s)=>!fe(f(e,s)).length&&k(e,s);const Rr={mode:W.onSubmit,reValidateMode:W.onChange,shouldFocusError:!0};function Mr(e={}){let s={...Rr,...e},t={submitCount:0,isDirty:!1,isLoading:X(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},u=S(s.defaultValues)||S(s.values)?P(s.defaultValues||s.values)||{}:{},a=s.shouldUnregister?{}:P(u),y={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},T,M=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:ke(),array:ke(),state:ke()},L=He(s.mode),H=He(s.reValidateMode),j=s.criteriaMode===W.all,ye=r=>i=>{clearTimeout(M),M=setTimeout(r,i)},K=async r=>{if(F.isValid||r){const i=s.resolver?R((await Z()).errors):await B(n,!0);i!==t.isValid&&g.state.next({isValid:i})}},U=(r,i)=>{(F.isValidating||F.validatingFields)&&((r||Array.from(v.mount)).forEach(l=>{l&&(i?V(t.validatingFields,l,i):k(t.validatingFields,l))}),g.state.next({validatingFields:t.validatingFields,isValidating:!R(t.validatingFields)}))},m=(r,i=[],l,d,c=!0,o=!0)=>{if(d&&l){if(y.action=!0,o&&Array.isArray(f(n,r))){const h=l(f(n,r),d.argA,d.argB);c&&V(n,r,h)}if(o&&Array.isArray(f(t.errors,r))){const h=l(f(t.errors,r),d.argA,d.argB);c&&V(t.errors,r,h),Or(t.errors,r)}if(F.touchedFields&&o&&Array.isArray(f(t.touchedFields,r))){const h=l(f(t.touchedFields,r),d.argA,d.argB);c&&V(t.touchedFields,r,h)}F.dirtyFields&&(t.dirtyFields=ge(u,a)),g.state.next({name:r,isDirty:_(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else V(a,r,i)},Y=(r,i)=>{V(t.errors,r,i),g.state.next({errors:t.errors})},z=r=>{t.errors=r,g.state.next({errors:t.errors,isValid:!1})},w=(r,i,l,d)=>{const c=f(n,r);if(c){const o=f(a,r,A(l)?f(u,r):l);A(o)||d&&d.defaultChecked||i?V(a,r,i?o:Ee(c._f)):N(r,o),y.mount&&K()}},re=(r,i,l,d,c)=>{let o=!1,h=!1;const p={name:r},E=!!(f(n,r)&&f(n,r)._f.disabled);if(!l||d){F.isDirty&&(h=t.isDirty,t.isDirty=p.isDirty=_(),o=h!==p.isDirty);const O=E||ee(f(u,r),i);h=!!(!E&&f(t.dirtyFields,r)),O||E?k(t.dirtyFields,r):V(t.dirtyFields,r,!0),p.dirtyFields=t.dirtyFields,o=o||F.dirtyFields&&h!==!O}if(l){const O=f(t.touchedFields,r);O||(V(t.touchedFields,r,l),p.touchedFields=t.touchedFields,o=o||F.touchedFields&&O!==l)}return o&&c&&g.state.next(p),o?p:{}},he=(r,i,l,d)=>{const c=f(t.errors,r),o=F.isValid&&J(i)&&t.isValid!==i;if(e.delayError&&l?(T=ye(()=>Y(r,l)),T(e.delayError)):(clearTimeout(M),T=null,l?V(t.errors,r,l):k(t.errors,r)),(l?!ee(c,l):c)||!R(d)||o){const h={...d,...o&&J(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}},Z=async r=>{U(r,!0);const i=await s.resolver(a,s.context,jr(r||v.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return U(r),i},te=async r=>{const{errors:i}=await Z(r);if(r)for(const l of r){const d=f(i,l);d?V(t.errors,l,d):k(t.errors,l)}else t.errors=i;return i},B=async(r,i,l={valid:!0})=>{for(const d in r){const c=r[d];if(c){const{_f:o,...h}=c;if(o){const p=v.array.has(o.name);U([d],!0);const E=await Je(c,a,j,s.shouldUseNativeValidation&&!i,p);if(U([d]),E[o.name]&&(l.valid=!1,i))break;!i&&(f(E,o.name)?p?Sr(t.errors,E,o.name):V(t.errors,o.name,E[o.name]):k(t.errors,o.name))}h&&await B(h,i,l)}}return l.valid},ve=()=>{for(const r of v.unMount){const i=f(n,r);i&&(i._f.refs?i._f.refs.every(l=>!Se(l)):!Se(i._f.ref))&&Ve(r)}v.unMount=new Set},_=(r,i)=>(r&&i&&V(a,r,i),!ee(Te(),u)),b=(r,i,l)=>Dr(r,v,{...y.mount?a:A(i)?u:Q(r)?{[r]:i}:i},l,i),D=r=>fe(f(y.mount?a:u,r,e.shouldUnregister?f(u,r,[]):[])),N=(r,i,l={})=>{const d=f(n,r);let c=i;if(d){const o=d._f;o&&(!o.disabled&&V(a,r,lr(i,o)),c=_e(o.ref)&&C(i)?"":i,sr(o.ref)?[...o.ref.options].forEach(h=>h.selected=c.includes(h.value)):o.refs?de(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(c)?!!c.find(p=>p===h.value):c===h.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(h=>h.checked=h.value===c):je(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||g.values.next({name:r,values:{...a}})))}(l.shouldDirty||l.shouldTouch)&&re(r,c,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&ue(r)},$=(r,i,l)=>{for(const d in i){const c=i[d],o=`${r}.${d}`,h=f(n,o);(v.array.has(r)||!be(c)||h&&!h._f)&&!ae(c)?$(o,c,l):N(o,c,l)}},I=(r,i,l={})=>{const d=f(n,r),c=v.array.has(r),o=P(i);V(a,r,o),c?(g.array.next({name:r,values:{...a}}),(F.isDirty||F.dirtyFields)&&l.shouldDirty&&g.state.next({name:r,dirtyFields:ge(u,a),isDirty:_(r,o)})):d&&!d._f&&!C(o)?$(r,o,l):N(r,o,l),Ke(r,v)&&g.state.next({...t}),g.values.next({name:y.mount?r:void 0,values:{...a}})},le=async r=>{y.mount=!0;const i=r.target;let l=i.name,d=!0;const c=f(n,l),o=()=>i.type?Ee(c._f):xr(r),h=p=>{d=Number.isNaN(p)||p===f(a,l,p)};if(c){let p,E;const O=o(),se=r.type===We.BLUR||r.type===We.FOCUS_OUT,dr=!Cr(c._f)&&!s.resolver&&!f(t.errors,l)&&!c._f.deps||Tr(se,f(t.touchedFields,l),t.isSubmitted,H,L),Ae=Ke(l,v,se);V(a,l,O),se?(c._f.onBlur&&c._f.onBlur(r),T&&T(0)):c._f.onChange&&c._f.onChange(r);const we=re(l,O,se,!1),fr=!R(we)||Ae;if(!se&&g.values.next({name:l,type:r.type,values:{...a}}),dr)return F.isValid&&K(),fr&&g.state.next({name:l,...Ae?{}:we});if(!se&&Ae&&g.state.next({...t}),s.resolver){const{errors:qe}=await Z([l]);if(h(O),d){const yr=Xe(t.errors,n,l),$e=Xe(qe,n,yr.name||l);p=$e.error,l=$e.name,E=R(qe)}}else U([l],!0),p=(await Je(c,a,j,s.shouldUseNativeValidation))[l],U([l]),h(O),d&&(p?E=!1:F.isValid&&(E=await B(n,!0)));d&&(c._f.deps&&ue(c._f.deps),he(l,E,p,we))}},ne=(r,i)=>{if(f(t.errors,i)&&r.focus)return r.focus(),1},ue=async(r,i={})=>{let l,d;const c=De(r);if(s.resolver){const o=await te(A(r)?r:c);l=R(o),d=r?!c.some(h=>f(o,h)):l}else r?(d=(await Promise.all(c.map(async o=>{const h=f(n,o);return await B(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!d&&!t.isValid)&&K()):d=l=await B(n);return g.state.next({...!Q(r)||F.isValid&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),i.shouldFocus&&!d&&ce(n,ne,r?c:v.mount),d},Te=r=>{const i={...y.mount?a:u};return A(r)?i:Q(r)?f(i,r):r.map(l=>f(i,l))},Oe=(r,i)=>({invalid:!!f((i||t).errors,r),isDirty:!!f((i||t).dirtyFields,r),isTouched:!!f((i||t).touchedFields,r),isValidating:!!f((i||t).validatingFields,r),error:f((i||t).errors,r)}),nr=r=>{r&&De(r).forEach(i=>k(t.errors,i)),g.state.next({errors:r?t.errors:{}})},Re=(r,i,l)=>{const d=(f(n,r,{_f:{}})._f||{}).ref;V(t.errors,r,{...i,ref:d}),g.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&d&&d.focus&&d.focus()},ur=(r,i)=>X(r)?g.values.subscribe({next:l=>r(b(void 0,i),l)}):b(r,i,!0),Ve=(r,i={})=>{for(const l of r?De(r):v.mount)v.mount.delete(l),v.array.delete(l),i.keepValue||(k(n,l),k(a,l)),!i.keepError&&k(t.errors,l),!i.keepDirty&&k(t.dirtyFields,l),!i.keepTouched&&k(t.touchedFields,l),!i.keepIsValidating&&k(t.validatingFields,l),!s.shouldUnregister&&!i.keepDefaultValue&&k(u,l);g.values.next({values:{...a}}),g.state.next({...t,...i.keepDirty?{isDirty:_()}:{}}),!i.keepIsValid&&K()},Me=({disabled:r,name:i,field:l,fields:d,value:c})=>{if(J(r)){const o=r?void 0:A(c)?Ee(l?l._f:f(d,i)._f):c;V(a,i,o),re(i,o,!1,!1,!0)}},Fe=(r,i={})=>{let l=f(n,r);const d=J(i.disabled);return V(n,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...i}}),v.mount.add(r),l?Me({field:l,disabled:i.disabled,name:r,value:i.value}):w(r,!0,i.value),{...d?{disabled:i.disabled}:{},...s.progressive?{required:!!i.required,min:oe(i.min),max:oe(i.max),minLength:oe(i.minLength),maxLength:oe(i.maxLength),pattern:oe(i.pattern)}:{},name:r,onChange:le,onBlur:le,ref:c=>{if(c){Fe(r,i),l=f(n,r);const o=A(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,h=Lr(o),p=l._f.refs||[];if(h?p.find(E=>E===o):o===l._f.ref)return;V(n,r,{_f:{...l._f,...h?{refs:[...p.filter(Se),o,...Array.isArray(f(u,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),w(r,!1,void 0,o)}else l=f(n,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(pr(v.array,r)&&y.action)&&v.unMount.add(r)}}},Ue=()=>s.shouldFocusError&&ce(n,ne,v.mount),or=r=>{J(r)&&(g.state.next({disabled:r}),ce(n,(i,l)=>{let d=r;const c=f(n,l);c&&J(c._f.disabled)&&(d||(d=c._f.disabled)),i.disabled=d},0,!1))},Be=(r,i)=>async l=>{let d;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let c=P(a);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:h}=await Z();t.errors=o,c=h}else await B(n);if(k(t.errors,"root"),R(t.errors)){g.state.next({errors:{}});try{await r(c,l)}catch(o){d=o}}else i&&await i({...t.errors},l),Ue(),setTimeout(Ue);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:R(t.errors)&&!d,submitCount:t.submitCount+1,errors:t.errors}),d)throw d},cr=(r,i={})=>{f(n,r)&&(A(i.defaultValue)?I(r,P(f(u,r))):(I(r,i.defaultValue),V(u,r,P(i.defaultValue))),i.keepTouched||k(t.touchedFields,r),i.keepDirty||(k(t.dirtyFields,r),t.isDirty=i.defaultValue?_(r,P(f(u,r))):_()),i.keepError||(k(t.errors,r),F.isValid&&K()),g.state.next({...t}))},Ie=(r,i={})=>{const l=r?P(r):u,d=P(l),c=R(r),o=c?u:d;if(i.keepDefaultValues||(u=l),!i.keepValues){if(i.keepDirtyValues)for(const h of v.mount)f(t.dirtyFields,h)?V(o,h,f(a,h)):I(h,f(o,h));else{if(Ne&&A(r))for(const h of v.mount){const p=f(n,h);if(p&&p._f){const E=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(_e(E)){const O=E.closest("form");if(O){O.reset();break}}}}n={}}a=e.shouldUnregister?i.keepDefaultValues?P(u):{}:P(o),g.array.next({values:{...o}}),g.values.next({values:{...o}})}v={mount:i.keepDirtyValues?v.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!F.isValid||!!i.keepIsValid||!!i.keepDirtyValues,y.watch=!!e.shouldUnregister,g.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:c?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ee(r,u)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:c?[]:i.keepDirtyValues?i.keepDefaultValues&&a?ge(u,a):t.dirtyFields:i.keepDefaultValues&&r?ge(u,r):{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Pe=(r,i)=>Ie(X(r)?r(a):r,i);return{control:{register:Fe,unregister:Ve,getFieldState:Oe,handleSubmit:Be,setError:Re,_executeSchema:Z,_getWatch:b,_getDirty:_,_updateValid:K,_removeUnmounted:ve,_updateFieldArray:m,_updateDisabledField:Me,_getFieldArray:D,_reset:Ie,_resetDefaultValues:()=>X(s.defaultValues)&&s.defaultValues().then(r=>{Pe(r,s.resetOptions),g.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:or,_subjects:g,_proxyFormState:F,_setErrors:z,get _fields(){return n},get _formValues(){return a},get _state(){return y},set _state(r){y=r},get _defaultValues(){return u},get _names(){return v},set _names(r){v=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:ue,register:Fe,handleSubmit:Be,watch:ur,setValue:I,getValues:Te,reset:Pe,resetField:cr,clearErrors:nr,unregister:Ve,setError:Re,setFocus:(r,i={})=>{const l=f(n,r),d=l&&l._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),i.shouldSelect&&c.select())}},getFieldState:Oe}}function Ur(e={}){const s=q.useRef(),t=q.useRef(),[n,u]=q.useState({isDirty:!1,isValidating:!1,isLoading:X(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:X(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...Mr(e),formState:n});const a=s.current.control;return a._options=e,wr({subject:a._subjects.state,next:y=>{Ar(y,a._proxyFormState,a._updateFormState,!0)&&u({...a._formState})}}),q.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),q.useEffect(()=>{if(a._proxyFormState.isDirty){const y=a._getDirty();y!==n.isDirty&&a._subjects.state.next({isDirty:y})}},[a,n.isDirty]),q.useEffect(()=>{e.values&&!ee(e.values,t.current)?(a._reset(e.values,a._options.resetOptions),t.current=e.values,u(y=>({...y}))):a._resetDefaultValues()},[e.values,a]),q.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),q.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),q.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),s.current.formState=Fr(n,a),s.current}const Br="/assets/delivery-img-vnrbY4mQ.png";function Wr(){const[e,s]=hr.useState(!1),t=vr(),{register:n,handleSubmit:u,formState:{errors:a,isValid:y}}=Ur({mode:"onBlur"}),{productsInCart:v,totalPrice:T,freeDelivery:M}=gr(L=>L.cart);function F(L){function H(K){let U="";return K.forEach(function(m){U=`${U}
          ${m.name}, ${m.quantity} шт., ${m.price*m.quantity}р`}),U}const j=Math.floor(Math.random()*100)+1;return`${L.name}, спасибо за Ваш заказ! Ваш заказ уже принят, ожидайте.
    Заказ №${j}

    ${e?"Доставка по адресу:":"Самовывоз"}
    ${e?L.adress+(L.floor&&", этаж "+L.floor)+(L.intercom&&", домофон "+L.intercom):""}
    ${M?"Бесплатная доставка":"Стоимость доставки 400р"}

    Состав заказа: ${H(v)}

    Итого: ${T}р
    `}function g(L){alert(F(L)),t(mr()),t(_r())}return x.jsxs("div",{className:"delivery_wrapper",children:[x.jsx("div",{className:"delivery-image",children:x.jsx("img",{src:Br,alt:"Дессерт"})}),x.jsx("div",{className:"form_wrapper",children:x.jsxs("form",{className:"delivery-form",onSubmit:u(g),children:[x.jsx("h3",{className:"delivery-form_title",children:"Доставка"}),x.jsxs("div",{className:"input_wrapper",children:[x.jsx("input",{...n("name",{required:"Поле обязательно для заполнения",minLength:{value:2,message:"Не менее 2-х символов"}}),className:"input input_name",type:"text",placeholder:"Ваше имя"}),(a==null?void 0:a.name)&&x.jsx("div",{className:"input-error",children:x.jsx("p",{children:a.name.message})})]}),x.jsxs("div",{className:"input_wrapper",children:[x.jsx("input",{...n("phone",{required:"Поле обязательно для заполнения",pattern:{value:/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/i,message:"Укажите правильный номер телефона"}}),className:"input input_tel",type:"tel",placeholder:"Ваш телефон"}),(a==null?void 0:a.phone)&&x.jsx("div",{className:"input-error",children:x.jsx("p",{children:a.phone.message})})]}),x.jsxs("div",{className:"radio_wrapper",children:[x.jsx("input",{type:"radio",className:"custom-radio",id:"pickup",name:"order",value:"pickup",checked:!e,onChange:()=>s(!1)}),x.jsx("label",{htmlFor:"pickup",children:"Самовывоз"}),x.jsx("input",{type:"radio",className:"custom-radio",id:"delivery",name:"order",value:"delivery",checked:e,onChange:()=>s(!0)}),x.jsx("label",{htmlFor:"delivery",children:"Доставка"}),e&&x.jsxs("div",{className:"adress_wrapper",children:[x.jsxs("div",{className:"input-adress_wrapper input_wrapper",children:[x.jsx("input",{...n("adress",{required:"Поле обязательно для заполнения",min:{value:10,message:"Не менее 10 символов"}}),className:"input input_adress",type:"text",placeholder:"Улица, дом, квартира"}),(a==null?void 0:a.adress)&&x.jsx("div",{className:"input-error",children:x.jsx("p",{children:a.adress.message})})]}),x.jsxs("div",{className:"input_wrapper",children:[x.jsx("input",{...n("floor",{maxLength:{value:2,message:"Не более 2-х цифр"}}),className:"input input_adress-details",type:"number",placeholder:"Этаж"}),(a==null?void 0:a.floor)&&x.jsx("div",{className:"input-error",children:x.jsx("p",{children:a.floor.message})})]}),x.jsxs("div",{className:"input_wrapper",children:[x.jsx("input",{...n("intercom",{maxLength:{value:4,message:"Не более 4-х цифр"}}),className:"input input_adress-details",type:"number",placeholder:"Домофон"}),(a==null?void 0:a.intercom)&&x.jsx("div",{className:"input-error",children:x.jsx("p",{children:a.intercom.message})})]})]})]}),x.jsx("button",{className:"button order-button delivery-button",type:"submit",disabled:!y,children:"Оформить заказ"})]})})]})}export{Wr as default};
